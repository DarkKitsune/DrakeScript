// Function that threads will use
local mut = CreateMutex();

local function threadA(mut)
{
	while (true)
	{
		mut:Lock();
		Sleep(1000);
		PrintLn("A");
		mut:Unlock();
	}
}

local function threadB(mut)
{
	while (true)
	{
		mut:Lock();
		Sleep(1000);
		PrintLn("B");
		mut:Unlock();
	}
}

local ta = $threadA(mut);
local tb = $threadB(mut);

ta:WaitOn();
tb:WaitOn();